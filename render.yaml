services:
  - type: web
    name: vaisu
    runtime: node
    region: oregon
    plan: free
    buildCommand: npm install && npm run build:prod
    startCommand: npm run start:prod
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3001
      - key: ENABLE_PERSISTENCE
        value: true
      - key: OPENROUTER_BASE_URL
        value: https://openrouter.ai/api/v1
      - key: AWS_REGION
        value: us-east-1
      - key: S3_BUCKET_NAME
        value: vaisu-documents-dev
      - key: DYNAMODB_DOCUMENTS_TABLE
        value: vaisu-documents
      - key: DYNAMODB_ANALYSES_TABLE
        value: vaisu-analyses
      # These must be added via Render Dashboard (secrets):
      # - OPENROUTER_API_KEY
      # - APP_URL (set to your Render URL)
      # - AWS_ACCESS_KEY_ID
      # - AWS_SECRET_ACCESS_KEY
