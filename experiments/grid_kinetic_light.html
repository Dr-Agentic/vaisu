<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vaisu - Kinetic Constellation (Light)</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f8fafc;
            --primary: #2563eb;
            --accent: #db2777;
            --card-bg: #ffffff;
            --text-main: #0f172a;
            --text-sub: #64748b;
            --border: #e2e8f0;
        }
        body { 
            background: var(--bg); 
            color: var(--text-main); 
            font-family: 'Plus Jakarta Sans', sans-serif;
            overflow-x: hidden;
        }
        .kinetic-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 32px;
            position: relative;
            z-index: 10;
        }
        .signal-line {
            fill: none;
            stroke: var(--primary);
            stroke-width: 3;
            stroke-dasharray: 10 10;
            stroke-linecap: round;
            opacity: 0;
            transition: opacity 0.5s, stroke-dashoffset 0.5s;
        }
        .signal-line.active {
            opacity: 0.4;
            animation: flow 1s linear infinite;
        }
        @keyframes flow {
            from { stroke-dashoffset: 20; }
            to { stroke-dashoffset: 0; }
        }
        .refined-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }
        .refined-card:hover {
            border-color: #cbd5e1;
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .card-active {
            border-color: var(--primary) !important;
            border-width: 2px;
            box-shadow: 0 0 40px rgba(37, 99, 235, 0.15);
        }
        .card-related {
            border-color: var(--accent) !important;
            border-width: 2px;
            background: #fffdfa;
        }
        .dimmed {
            opacity: 0.4;
            filter: grayscale(0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useMemo, useRef, useEffect } = React;

        const DATA = {
            entities: [
                { id: "e1", text: "Cloud Partnership Services", type: "ROOT", group: 0 },
                { id: "e2", text: "AWS Integration", type: "ORG", group: 1 },
                { id: "e4", text: "Webflow Engine", type: "PLATFORM", group: 1 },
                { id: "e9", text: "Framer Canvas", type: "PLATFORM", group: 1 },
                { id: "e11", text: "WordPress Core", type: "LEGACY", group: 2 },
                { id: "e7", text: "SEO Optimizer", type: "FEATURE", group: 2 },
                { id: "e23", text: "Cost Stream: $29/mo", type: "METRIC", group: 3 },
                { id: "e25", text: "Entry Point: $5/mo", type: "METRIC", group: 3 }
            ],
            links: [
                { s: "e1", t: "e2" }, { s: "e1", t: "e4" }, { s: "e1", t: "e9" },
                { s: "e4", t: "e7" }, { s: "e4", t: "e23" }, { s: "e9", t: "e25" }
            ]
        };

        const App = () => {
            const [active, setActive] = useState(null);
            const cardRefs = useRef({});
            const [lines, setLines] = useState([]);

            const neighbors = useMemo(() => {
                if (!active) return new Set();
                const n = new Set();
                DATA.links.forEach(l => {
                    if (l.s === active) n.add(l.t);
                    if (l.t === active) n.add(l.s);
                });
                return n;
            }, [active]);

            useEffect(() => {
                const updateLines = () => {
                    if (!active) { setLines([]); return; }
                    const newLines = [];
                    DATA.links.forEach((l, i) => {
                        if (l.s === active || l.t === active) {
                            const sEl = cardRefs.current[l.s];
                            const tEl = cardRefs.current[l.t];
                            if (sEl && tEl) {
                                const sRect = sEl.getBoundingClientRect();
                                const tRect = tEl.getBoundingClientRect();
                                newLines.push({
                                    id: `line-${i}`,
                                    x1: sRect.left + sRect.width / 2,
                                    y1: sRect.top + sRect.height / 2,
                                    x2: tRect.left + tRect.width / 2,
                                    y2: tRect.top + tRect.height / 2
                                });
                            }
                        }
                    });
                    setLines(newLines);
                };

                updateLines();
                window.addEventListener('resize', updateLines);
                return () => window.removeEventListener('resize', updateLines);
            }, [active]);

            return (
                <div className="p-20 relative min-h-screen">
                    <header className="mb-20 flex justify-between items-end">
                        <div>
                            <h1 className="text-4xl font-black tracking-tight flex items-center gap-4 text-slate-900">
                                <span className="w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center text-xl text-white shadow-lg shadow-blue-200">K</span>
                                KINETIC_MAP
                            </h1>
                            <p className="text-slate-400 font-mono text-[10px] mt-2 uppercase tracking-[0.3em]">Light Mode Active Signal Protocol</p>
                        </div>
                        <div className="flex gap-4">
                            <div className="px-4 py-2 rounded-full border border-slate-200 bg-white text-[10px] font-bold text-slate-400 tracking-widest uppercase">
                                {active ? "Signal Locked" : "Waiting for Input"}
                            </div>
                        </div>
                    </header>

                    <svg className="fixed inset-0 w-full h-full pointer-events-none z-0">
                        {lines.map(l => (
                            <line 
                                key={l.id} 
                                x1={l.x1} y1={l.y1} x2={l.x2} y2={l.y2} 
                                className="signal-line active"
                            />
                        ))}
                    </svg>

                    <div className="kinetic-grid">
                        {[0, 1, 2, 3].map(group => (
                            <div key={group} className="flex flex-col gap-6">
                                <div className="text-[10px] font-black text-slate-300 uppercase tracking-[0.4em] mb-2 border-b border-slate-100 pb-2">Layer_0{group}</div>
                                {DATA.entities.filter(e => e.group === group).map(e => {
                                    const isSelected = active === e.id;
                                    const isRelated = neighbors.has(e.id);
                                    const isDimmed = active && !isSelected && !isRelated;

                                    return (
                                        <div 
                                            key={e.id}
                                            ref={el => cardRefs.current[e.id] = el}
                                            onClick={() => setActive(isSelected ? null : e.id)}
                                            className={`refined-card rounded-2xl p-6 cursor-pointer relative ${isSelected ? 'card-active' : isRelated ? 'card-related' : ''} ${isDimmed ? 'dimmed scale-95' : ''}`}
                                        >
                                            <div className="flex justify-between items-start mb-3">
                                                <div className="text-[9px] font-mono text-slate-400">UID_{e.id}</div>
                                                <div className={`w-1.5 h-1.5 rounded-full ${isSelected ? 'bg-blue-500 animate-pulse' : isRelated ? 'bg-pink-500' : 'bg-slate-200'}`} />
                                            </div>
                                            <div className="font-bold text-lg leading-tight text-slate-800">{e.text}</div>
                                            <div className="mt-6 flex items-center gap-2">
                                                <span className="text-[9px] px-2 py-0.5 rounded-md bg-slate-100 text-slate-500 font-extrabold uppercase tracking-tighter">{e.type}</span>
                                                {isSelected && <span className="text-[9px] font-bold text-blue-600 uppercase">Active_Source</span>}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        ))}
                    </div>

                    <div className="fixed bottom-10 left-10 text-[10px] font-mono text-slate-300 pointer-events-none">
                        PROTOTYPE_V2 // VAISU_VISUAL_LABS
                    </div>
                </div>
            );
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>